# آنچه گذشت
بعد از این‌که ماشین مجازی و سیستم‌عامل‌هامون را راه‌اندازی کردیم، آدرس آیپی متاسپلویتیبل را هم پیدا کردیم، وقتشه که بفهمیم وضعیت پورت‌های 
tcp روی ماشین هدف چی هست!
برای پیدا کردن نقاط ضعف یک سیستم‌عامل، راه‌های زیادی وجود داره که بسته به دسترسی‌های ما می‌تونه انجام بشه. در اینجا، ما فرض می‌کنیم که وارد یک شبکه شدیم ( مثلا به یک مودم وصل شدیم ) و بعد از اسکن نودهایی که به شبکه وصل هستند، فهمیدیم یک سیستم‌عامل به اسم متاسپلویتیبل هم توی شبکه است. بعد از اون، در قدم بعدی، ما قصد داریم تا بتونم از طریق شبکه، وارد اون سیستم‌عامل بشیم، بهش نفوذ کنیم، به فایل‌هاش دسترسی داشته باشیم و غیره. خب در اینجا ما که دسترسی فیزیکی به کامپیوتر اون شخص نداریم. و تنها ارتباط ما با سیستم هدف، اینه که جفتمون توی یک شبکه هستیم. بنابرین نگاهی می‌ندازیم به این‌که از چه طریق‌هایی می‌تونیم توی شبکه با کاربر حرف بزنیم. اینجاست که مفهوم پورت‌ها میان وسط.
کاربر، نود یا سیستم‌عاملی که توی شبکه است، می‌خواد یکسری سرویس از بقیه افراد بگیره یا مجموعه‌ای از سرویس‌ها را به کاربران موجود در شبکه ارائه بده. بنابرین سرویس‌های خودش را با یک شماره پورت مشخص توی شبکه نشون میده. به عنوان مثال، سرویسی به نام ftp باعث میشه تا من و کاربر بتونیم توی یک شبکه، به فایل‌های همدیگه دسترسی داشته باشیم. کاربر میاد سرویس ftp خودش را روی سیستم‌عامل‌ش راه میندازه، و بعد از اون من می‌تونم از طریق آدرس آیپی اون و شماره پورت سرویس، به همراه یوزرنیم و پسورد، فایل‌های کاربر را ببینم.
اما در اینجا چه اتفاقی می‌افته اگه یک آسیب‌پذیری روی اون سرویس ftp که کاربر نصب کرده پیش بیاد؟ مثلا نسخه‌ش قدیمی باشه، کانفیگ اون اشتباه باشه، دسترسی‌هاش درست پیکربندی نشده باشه. در اینجاست که ما وارد میشیم. در قدم اول شناسایی می‌کنیم که اون سرویس روی سیستم‌عامل هدف وجود داره. بعد از اون به دنبال آسیب‌پذیری‌هایی می‌گردیم که ممکنه اون سرویس داشته باشه و شروع به تست کردن می‌کنیم تا بتونیم به اون سیستم‌عامل دسترسی بگیریم.

# اسکن پورت‌های tcp
در قدم اول، و بعد از پیدا کردن آیپی metasploit، قصد داریم ببینیم چه سرویس‌هایی روی سیستم‌عامل کاربر درحال اجراست. این کار را با دستور زیر و ابزار nmap انجام میدیم:
 

`sudo nmap -sS -Pn -p 1-65535 -T5 192.168.56.102`

> sudo: معمولا اگه ابزارهاتون را با دسترسی روت اجرا کنید، قابلیت‌های بیشتری را بهتون میده

> nmap: از این ابزار توی تست‌های خودمون زیاد استفاده می‌کنیم. اینجاهم به وضعیت پورت‌های تی‌سی‌پی نگاهی می‌ندازیم

> -sS از سوییچ‌های nmap که باعث میشه پکت syn بفرسته ( در اینجا هدف اینه که فقط وضعیت پورت‌های tcp را بررسی کنیم )

> -Pn به معنی اینه که ما می‌دونیم این آدرس آیپی لایو و توی شبکه هست و به nmap میگیم که نیازی نیست دوباره اون را پینگ بگیره یا up بودن اون هاست را چک کنه ( که در وقت اسکن صرفه‌جویی میشه )

> -p یک رنج از پورت را بهش معرفی می‌کنیم که اینجا گفتیم از پورت ۱ تا ۶۵۵۳۵ را اسکن کنه

> -T برای سرعت اسکن و تعداد همزمانی ارسال پکت‌ها به سمت تارگت که بین ۱ تا ۵ تعریف میشه
      
    
پس درنهایت اینجا من ماشین‌مجازی متاسپلویت خودم را به آدرس 192.168.56.102 برای پورت‌های tcp (-sS) از پورت ۱ تا ۶۵۵۳۵ ( تمام شماره پورت‌های موجود ) اسکن می‌کنم تا ببینم وضعیت پورت‌ها به چه صورتی است. وقتی یک رنج از پورت‌هارو اسکن کنیم، به صورت پیشفرض nmp پورت‌های باز را فقط نشون میده ( که خب اینجا نیازی به دونستن پورت‌های بسته نداریم ).
این خروجی دستور بالا است:

```
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-07-01 18:44 +0330
Nmap scan report for 192.168.56.102
Host is up (0.000088s latency).
Not shown: 65522 closed tcp ports (reset)
PORT     STATE SERVICE
21/tcp   open  ftp
22/tcp   open  ssh
23/tcp   open  telnet
25/tcp   open  smtp
53/tcp   open  domain
80/tcp   open  http
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
3306/tcp open  mysql
3632/tcp open  distccd
5432/tcp open  postgresql
8009/tcp open  ajp13
8180/tcp open  unknown
MAC Address: 08:00:27:B8:DA:1E (Oracle VirtualBox virtual NIC)

Nmap done: 1 IP address (1 host up) scanned in 1.10 seconds
```
# جمع‌بندی
توی این قسمت پورت‌های tcp باز را روی تارگت پیدا کردیم و در قسمت بعدی میریم سراغ تست کردن این‌که روی هر پورت چه چیزهایی وجود داره و قراره باهاشون چیکار کنیم.
