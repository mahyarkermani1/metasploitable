# توپولوژی شبکه
من به عنوان یک کاربر ساده عضوی از یک شبکه‌ام، حالا می‌تونه به صورت وایرلس باشه، با سیم وصل باشم، ریموت باشم یا غیره. توی اینجا ما یک کالی لینوکس داریم ( سیستم‌عامل ما کالی لینوکس است | که برای شما می‌تونه هرچیزی باشه ) که روش ماشین مجازی virtualbox راه‌اندازی کردیم و روی اون metasploitable 1 را نصب کردیم. حالت شبکه اون را روی host-only گذاشتم و اسم کارت شبکه‌مون ( یک کارت شبکه مجازی که virtualbox خودش ساخته - یا می‌تونید از قسمت tools - network - create یکی بسازید ) vboxnet0 است. به dhcp ماشین مجازیم رنج آیپی ۱۹۲.۱۶۸.۵۶.۰ را دادم که در نهایت یک آیپی از اون بازه هم برای متاسپلویتیبل من خواهد بود.

اولین کاری که هر متخصص امنیت انجام میده ( یا حده‌اقل ما انجام می‌دیم ) اینه که بفهمیم چه آیپی‌هایی توی شبکمون قابل دیده شدن هستند. برای این کار از ابزار nmap با سوییچ -sn استفاده می‌کنیم. به صورت پیشفرض وقتی یک رنج ایپی را به nmap بدید، ۱۰۲۴ پورت اول آیپی‌های لایو را بررسی می‌کنه که ببینه چه پورت‌های بازی دارن. این سوییچ باعث میشه پورت اسکن غیرفعال بشه و فقط آیپی‌های لایوی شبکه را بهمون نشون بده:

```nmap -sn 192.168.56.0/24```

و البته من سوییچ  `T5-`  را هم به دستور بالا اضافه می‌کنم تا با سرعت بیشتری اسکن کنه. شما می‌تونید عددی از بازه ۱ تا ۵ را به این سوییچ بدید که هرچقدر عدد اون بیشتر باشه، سرعت اسکن هم بیشتر خواهد بود ( و البته اینجا چون محیط آزمایشگاهیه من بیشترین سرعت را بهش دادم، اما توی محیط‌های واقعی این کار می‌تونه ترافیک بیشتری روی سیستم هدف و جلب توجه بیشتری برای فایروال‌ها باشه ). پس دستور نهایی ما برای پیدا کردن آیپی‌های لایو شبکمون شد:

`sudo nmap -sn -T5 192.168.56.0/24`

> [!NOTE]
> اگه از sudo استفاده کنید، nmap می‌تونه اطلاعات بیشتری از جمله مک‌آدرس‌ها و اسامی هاست‌ها رو بهتون بده

و خروجی دستور برای من:

```
Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-06-30 17:03 +0330
Nmap scan report for 192.168.56.100
Host is up (0.00027s latency).
MAC Address: 08:00:27:59:41:85 (Oracle VirtualBox virtual NIC)
Nmap scan report for 192.168.56.102
Host is up (0.00071s latency).
MAC Address: 08:00:27:B8:DA:1E (Oracle VirtualBox virtual NIC)
Nmap scan report for 192.168.56.1
Host is up.
Nmap done: 256 IP addresses (3 hosts up) scanned in 4.00 seconds
```

ما اینجا ۱۹۲.۱۶۸.۵۶.۱ را داریم که آیپی کالی من است ( کارت شبکه ماشین مجازی virtualbox روی کالی فعال شده و dhcp ( که توی ماشین مجازی راه انداختیم ) به کالی هم آیپی داده ) و ۱۹۲.۱۶۸.۵۶.۱۰۲ برای متاسپلویتیبل است. آیپی ۱۹۲.۱۶۸.۵۶.۱۰۰ هم متعلق به dhcp server ویرچوال‌باکس است.

## جمع‌بندی
تا اینجای کار، درباره آزمایشگاهی که راه انداختیم، باهم صحبت کردیم و توی مراحل بعدی، میایم و روی متاسپلویتیبل ۱ عمیق‌تر میشیم، و نگاه می‌کنیم که اصلا از کجا باید شروع کنیم و چطور آسیب‌پذیری‌های سیستم‌عامل‌مون را پیدا کنیم.
